<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ê∏∏ÊàèÂìÅÂë≥Èõ∑Ëææ ¬∑ ÊáÇ‰Ω†ÁöÑÊ∏∏ÊàèÊô∫ËÉΩÊé®Ëçê</title>
  <style>
    :root{
      --bg:#0a0d16; --bg1:#0e1220; --bg2:#151B2E;
      --brand1:#00d4ff; --brand2:#8b5cf6; --brand3:#10b981;
      --accent:#ff6b6b; --gold:#fbbf24;
      --muted:#94a3b8; --glass: rgba(255,255,255,.08);
      --outline: rgba(255,255,255,.12); --ring: rgba(0,212,255,.3);
      --shadow: 0 25px 70px rgba(0,0,0,.4);
      --glow: 0 0 30px rgba(0,212,255,.2);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: 'SF Pro Display', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, 'PingFang SC', sans-serif;
      background:
        radial-gradient(1400px 700px at 80% -15%, rgba(0,212,255,.15), transparent 65%),
        radial-gradient(1200px 900px at -15% 110%, rgba(139,92,246,.18), transparent 65%),
        radial-gradient(800px 600px at 50% 50%, rgba(16,185,129,.08), transparent 70%),
        linear-gradient(150deg, var(--bg1), var(--bg2));
      color:#f1f5f9; min-height:100vh; overflow-x:hidden;
    }
    .app{max-width:440px;margin:0 auto;min-height:100vh;display:flex;flex-direction:column;position:relative}

    .header{position:sticky;top:0;z-index:20;backdrop-filter: blur(15px);
      background: linear-gradient(180deg, rgba(10,13,22,.9), rgba(10,13,22,.4) 70%, transparent);
      padding:20px 18px 14px;border-bottom:1px solid var(--outline);display:flex;gap:14px;align-items:center}
    .logo{width:38px;height:38px;border-radius:12px;
      background:conic-gradient(from 200deg, var(--brand1), var(--brand2), var(--accent));
      box-shadow:var(--glow), inset 0 0 20px rgba(255,255,255,.1);
      position:relative;overflow:hidden}
    .logo::after{content:'üéÆ';position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-size:18px}
    .title{font-weight:900;letter-spacing:-.02em;font-size:18px}
    .subtitle{font-size:13px;color:var(--muted);margin-top:1px}

    .input-section{padding:0 18px 8px}
    .input-bar{display:flex;gap:12px;align-items:center;background:var(--glass);
      border:1px solid var(--outline);border-radius:20px;padding:12px 16px;
      box-shadow: var(--shadow);transition:all .3s ease;position:relative;overflow:hidden}
    .input-bar::before{content:'';position:absolute;inset:0;background:linear-gradient(45deg, transparent, rgba(0,212,255,.02), transparent);opacity:0;transition:opacity .3s}
    .input-bar:hover::before{opacity:1}
    .input-bar:hover{border-color:rgba(0,212,255,.3);box-shadow:var(--shadow),var(--glow)}
    .input-bar input{flex:1;background:transparent;border:none;outline:none;color:#fff;font-size:16px;font-weight:500}
    .input-bar input::placeholder{color:var(--muted)}
    .input-bar button{border:none;cursor:pointer;color:#0a0d16;font-weight:800;border-radius:16px;
      background:linear-gradient(135deg,var(--brand1),var(--brand2)); padding:12px 20px; 
      box-shadow:0 15px 40px var(--ring);transition:all .2s ease;position:relative}
    .input-bar button:hover{transform:translateY(-1px);box-shadow:0 20px 50px var(--ring)}

    .quick-tags{display:flex;flex-wrap:wrap;gap:10px;padding:12px 18px}
    .tag{padding:10px 16px;border-radius:20px;background:linear-gradient(135deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      border:1px solid var(--outline);font-size:13px;color:#e2e8f0;cursor:pointer;transition:all .3s;
      position:relative;overflow:hidden;font-weight:600}
    .tag::before{content:'';position:absolute;inset:0;background:linear-gradient(45deg, var(--brand1), var(--brand2));opacity:0;transition:opacity .3s}
    .tag:hover{transform:translateY(-2px); box-shadow:0 10px 25px rgba(0,0,0,.3)}
    .tag:hover::before{opacity:.1}

    .timeline{display:flex;flex-direction:column;gap:16px;padding:12px 16px 120px}
    .message{border:1px solid var(--outline);background:rgba(14,18,32,.7);backdrop-filter: blur(15px);
      border-radius:24px;padding:18px;box-shadow: var(--shadow);position:relative}
    .message.ai{align-self:flex-start;max-width:95%}
    .message.user{align-self:flex-end;max-width:85%;background:linear-gradient(135deg, rgba(0,212,255,.08), rgba(139,92,246,.08));}
    .message::before{content:'';position:absolute;inset:0;border-radius:24px;background:linear-gradient(45deg, transparent, rgba(255,255,255,.02), transparent);pointer-events:none}

    .taste-card{border:1px solid var(--outline);background:rgba(15,19,35,.8);backdrop-filter: blur(15px); 
      border-radius:24px;padding:20px;box-shadow: var(--shadow);position:relative;overflow:hidden}
    .taste-card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;
      background:linear-gradient(90deg, var(--brand1), var(--brand2), var(--accent));opacity:.8}
    .taste-card h3{margin:0 0 12px 0;font-size:17px;font-weight:800;display:flex;align-items:center;gap:8px}
    .taste-card .desc{color:var(--muted);line-height:1.5;font-size:14px}

    .radar-section{margin-top:16px}
    .radar-wrap{position:relative;background:rgba(10,13,22,.6);border-radius:20px;padding:20px;
      border:1px solid rgba(255,255,255,.08)}
    .radar-canvas{width:100%;height:280px;border-radius:16px}
    .taste-legend{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:16px}
    .legend-item{display:flex;align-items:center;gap:8px;padding:8px 12px;
      background:rgba(255,255,255,.04);border-radius:12px;font-size:12px}
    .legend-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0}
    .legend-level{color:var(--muted);margin-left:auto;font-weight:600}

    .game-rec{border:1px solid var(--outline);background:rgba(15,19,35,.8);backdrop-filter: blur(15px); 
      border-radius:24px;padding:20px;box-shadow: var(--shadow);position:relative}
    .game-rec::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;
      background:linear-gradient(90deg, var(--accent), var(--gold));opacity:.9}
    .game-rec h3{margin:0 0 16px 0;font-size:17px;font-weight:800;color:var(--accent)}

    .game-showcase{display:flex;gap:16px;align-items:flex-start}
    .game-cover{width:72px;height:72px;border-radius:16px;position:relative;overflow:hidden;
      background:linear-gradient(135deg, var(--brand2), var(--accent));display:flex;align-items:center;justify-content:center;
      box-shadow:0 15px 35px rgba(139,92,246,.3)}
    .game-cover::after{content:'üéØ';font-size:28px;filter:drop-shadow(0 2px 4px rgba(0,0,0,.3))}
    .game-info{flex:1;min-width:0}
    .game-title{font-weight:900;font-size:16px;margin-bottom:8px;color:#fff}
    .game-reason{color:var(--muted);line-height:1.5;font-size:14px;margin-bottom:14px}
    .game-actions{display:flex;gap:10px;flex-wrap:wrap}
    .btn-primary{background:linear-gradient(135deg,var(--accent),var(--gold));border:none;padding:10px 18px;
      border-radius:16px;font-weight:800;color:#0a0d16;cursor:pointer;font-size:14px;
      box-shadow:0 12px 30px rgba(255,107,107,.25);transition:all .2s}
    .btn-primary:hover{transform:translateY(-1px);box-shadow:0 16px 40px rgba(255,107,107,.35)}
    .btn-ghost{border:1px solid var(--outline);background:rgba(255,255,255,.06);padding:10px 16px;
      border-radius:16px;font-weight:700;color:#e5e7eb;cursor:pointer;font-size:14px;transition:all .2s}
    .btn-ghost:hover{background:rgba(255,255,255,.1);transform:translateY(-1px)}

    .feedback-card{border:1px solid var(--outline);background:rgba(15,19,35,.8);backdrop-filter: blur(15px); 
      border-radius:24px;padding:20px;box-shadow: var(--shadow)}
    .feedback-actions{display:flex;gap:12px;margin-top:12px}
    .feedback-note{color:var(--muted);font-size:13px;margin-top:12px;line-height:1.4}

    .refine-form{border:1px solid var(--outline);background:rgba(15,19,35,.8);backdrop-filter: blur(15px); 
      border-radius:24px;padding:20px;box-shadow: var(--shadow)}
    .filter-group{margin:12px 0}
    .filter-label{font-size:13px;color:var(--muted);margin-bottom:6px;font-weight:600}
    .filter-options{display:flex;flex-wrap:wrap;gap:6px}
    .filter-chip{padding:8px 14px;border-radius:16px;border:1px solid var(--outline);
      background:rgba(255,255,255,.04);font-size:12px;color:#d7dff0;cursor:pointer;
      transition:all .2s;position:relative;font-weight:500}
    .filter-chip:hover{background:rgba(255,255,255,.08)}
    .filter-chip.selected{background:linear-gradient(135deg, rgba(0,212,255,.15), rgba(139,92,246,.15));
      border-color:rgba(0,212,255,.4);color:var(--brand1);box-shadow:0 0 15px rgba(0,212,255,.1)}

    .thinking{display:inline-flex;gap:6px;align-items:center;color:var(--brand1)}
    .thinking-dot{width:6px;height:6px;border-radius:50%;background:currentColor;
      animation: pulse 1.4s infinite ease-in-out}
    .thinking-dot:nth-child(2){animation-delay:.2s}
    .thinking-dot:nth-child(3){animation-delay:.4s}
    @keyframes pulse{0%,80%,100%{transform:scale(.6);opacity:.3}40%{transform:scale(1);opacity:1}}

    .slide-in{animation:slideIn .4s ease-out forwards;opacity:0;transform:translateY(10px)}
    @keyframes slideIn{to{opacity:1;transform:translateY(0)}}

    .toast{position:fixed;top:20px;left:50%;transform:translateX(-50%);
      background:rgba(0,0,0,.8);border:1px solid var(--outline);backdrop-filter:blur(10px);
      padding:10px 16px;border-radius:12px;font-size:13px;z-index:999;font-weight:500}

    /* ÁæéÂåñÈõ∑ËææÂõæÊ†∑Âºè */
    .radar-bg{fill:rgba(255,255,255,.02);stroke:rgba(255,255,255,.08);stroke-width:1}
    .radar-grid{stroke:rgba(255,255,255,.06);stroke-width:1;fill:none}
    .radar-area{fill:url(#radarGrad);stroke:rgba(0,212,255,.6);stroke-width:2;opacity:.8}
    .radar-point{fill:var(--brand1);stroke:#fff;stroke-width:2;filter:drop-shadow(0 2px 6px rgba(0,212,255,.4))}
    .radar-label{fill:#cbd5e1;font-size:11px;font-weight:600;text-anchor:middle}
  </style>
</head>
<body>
  <div class="app">
    <div class="header">
      <div class="logo"></div>
      <div>
        <div class="title">Ê∏∏ÊàèÂìÅÂë≥Èõ∑Ëææ</div>
        <div class="subtitle">AI ËØªÊáÇ‰Ω†ÁöÑÊ∏∏ÊàèDNAÔºåÁ≤æÂáÜÊé®ËçêÂ•ΩÊ∏∏Êàè</div>
      </div>
    </div>

    <div class="input-section">
      <div class="input-bar">
        <input id="gameInput" placeholder="ËØ¥ËØ¥‰Ω†ÊúÄËøëÂú®Áé©‰ªÄ‰πàÊ∏∏Êàè..." />
        <button id="analyzeBtn">ÂàÜÊûêÊàëÁöÑÂìÅÂë≥</button>
      </div>
    </div>

    <div class="quick-tags">
      <div class="tag" data-game="Á¨¨‰∫î‰∫∫Ê†º">Á¨¨‰∫î‰∫∫Ê†º</div>
      <div class="tag" data-game="Ëõã‰ªîÊ¥æÂØπ">Ëõã‰ªîÊ¥æÂØπ</div>
      <div class="tag" data-game="ÂÖâ¬∑ÈÅá">ÂÖâ¬∑ÈÅá</div>
      <div class="tag" data-game="ÁéãËÄÖËç£ËÄÄ">ÁéãËÄÖËç£ËÄÄ</div>
    </div>

    <div id="conversation" class="timeline">
      <div class="message ai slide-in">
        <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px">
          <span style="font-size:20px">ü§ñ</span>
          <strong style="font-size:16px">‰Ω†ÁöÑÊ∏∏ÊàèÂìÅÂë≥È°æÈóÆ</strong>
        </div>
        <div style="color:var(--muted);line-height:1.5">
          Âó®ÔºÅÊàëÊòØ‰Ω†ÁöÑ‰∏ìÂ±ûÊ∏∏ÊàèÂìÅÂë≥ÂàÜÊûêÂ∏à„ÄÇ<br>
          ÂëäËØâÊàë‰Ω†ÊúÄËøëÂú®Áé©ÁöÑÊ∏∏ÊàèÔºåÊàëÊù•ÂàÜÊûê‰Ω†ÁöÑ<span style="color:var(--brand1);font-weight:700">Ê∏∏ÊàèDNA</span>Ôºå
          ‰∏∫‰Ω†Êé®ËçêÊúÄÂêàÂè£Âë≥ÁöÑÊñ∞Ê∏∏Êàè ‚ú®
        </div>
      </div>
    </div>
  </div>

  <script>
    // Ê∏∏ÊàèÊï∞ÊçÆÂ∫ì - Êõ¥ÁúüÂÆûÁöÑÁî®Êà∑ÁîªÂÉèÂíåÊé®Ëçê
    const gameProfiles = {
      'Á¨¨‰∫î‰∫∫Ê†º': {
        analysis: '‰Ω†ÊòØ‰∏™<span style="color:var(--accent);font-weight:700">Á≠ñÁï•ÊÄùÁª¥ËÄÖ</span>ÔºÅÂñúÊ¨¢Âú®Á¥ßÂº†Âà∫ÊøÄ‰∏≠Âä®ËÑëÁ≠ãÔºå‰∫´Âèó‰∏çÂØπÁß∞Á´ûÊäÄÁöÑÂøÉÁêÜÂçöÂºà„ÄÇ‰Ω†ÂØπÊ∏∏ÊàèÁöÑ<span style="color:var(--brand1)">ÂÖ¨Âπ≥ÊÄß</span>ÂæàÂú®ÊÑèÔºåÊÑøÊÑè‰∏∫‰ºòË¥®‰ΩìÈ™å‰ªòË¥πÔºå‰ΩÜËÆ®ÂéåËøáÂ∫¶Ê∞™Èáë„ÄÇ',
        dna: {
          'Á≠ñÁï•ÊÄùËÄÉ': 95,
          'Á´ûÊäÄÂØπÊäó': 80,
          'ÊÇ¨ÁñëËß£Ë∞ú': 75,
          'Âõ¢ÈòüÂçè‰Ωú': 60,
          '‰ºëÈó≤Â®±‰πê': 30,
          'Êî∂ÈõÜÂÖªÊàê': 45
        }
      },
      'Ëõã‰ªîÊ¥æÂØπ': {
        analysis: '‰Ω†ÊòØ‰∏™<span style="color:var(--gold);font-weight:700">Âø´‰πê‰∏ª‰πâËÄÖ</span>ÔºÅÂÅèÁà±ËΩªÊùæÊêûÊÄ™ÁöÑÂ§ö‰∫∫Ê∏∏ÊàèÔºåÂñúÊ¨¢ÂíåÊúãÂèã‰∏ÄËµ∑ÂìàÂìàÂ§ßÁ¨ë„ÄÇ‰Ω†‰∏çÂ§™Âú®‰πéËæìËµ¢ÔºåÊõ¥‰∫´ÂèóÊ∏∏ÊàèËøáÁ®ã‰∏≠ÁöÑ<span style="color:var(--brand3)">Á§æ‰∫§‰πêË∂£</span>„ÄÇ',
        dna: {
          '‰ºëÈó≤Â®±‰πê': 95,
          'Á§æ‰∫§‰∫íÂä®': 85,
          'ÂèØÁà±Ê≤ªÊÑà': 80,
          'Âõ¢ÈòüÂçè‰Ωú': 70,
          'Á´ûÊäÄÂØπÊäó': 40,
          'Á≠ñÁï•ÊÄùËÄÉ': 25
        }
      },
      'ÂÖâ¬∑ÈÅá': {
        analysis: '‰Ω†ÊòØ‰∏™<span style="color:var(--brand3);font-weight:700">ÊÉÖÊÑü‰ΩìÈ™åËÄÖ</span>ÔºÅËøΩÊ±ÇÊ∏∏Êàè‰∏≠ÁöÑÁæéÊÑüÂíåÊÉÖÊÑüÂÖ±È∏£ÔºåÂñúÊ¨¢Ê∏©ÊöñÊ≤ªÊÑàÁöÑÁ§æ‰∫§‰ΩìÈ™å„ÄÇ‰Ω†Êõ¥ÁúãÈáçÊ∏∏ÊàèÁöÑ<span style="color:var(--brand2)">Ëâ∫ÊúØ‰ª∑ÂÄº</span>Ôºå‰∏çÂñúÊ¨¢ÊøÄÁÉàÁ´û‰∫â„ÄÇ',
        dna: {
          'ÂèØÁà±Ê≤ªÊÑà': 95,
          'Á§æ‰∫§‰∫íÂä®': 80,
          'Ëâ∫ÊúØÁæéÂ≠¶': 90,
          'Êé¢Á¥¢ÂÜíÈô©': 70,
          'Á´ûÊäÄÂØπÊäó': 20,
          'Á≠ñÁï•ÊÄùËÄÉ': 35
        }
      },
      'ÁéãËÄÖËç£ËÄÄ': {
        analysis: '‰Ω†ÊòØ‰∏™<span style="color:var(--accent);font-weight:700">Á´ûÊäÄ‰πãÁéã</span>ÔºÅÁÉ≠Ë°∑‰∫éMOBAÁöÑÁ≠ñÁï•ÂØπÊäóÔºå‰∫´ÂèóÂõ¢ÈòüÈÖçÂêàÂáªË¥•ÂØπÊâãÁöÑÂø´ÊÑü„ÄÇ‰Ω†ÂØπÊ∏∏Êàè<span style="color:var(--brand1)">Êìç‰ΩúÊâãÊÑü</span>Ë¶ÅÊ±ÇÂæàÈ´òÔºåÊÑøÊÑèÊäïÂÖ•Êó∂Èó¥ÈíªÁ†î„ÄÇ',
        dna: {
          'Á´ûÊäÄÂØπÊäó': 95,
          'Á≠ñÁï•ÊÄùËÄÉ': 85,
          'Âõ¢ÈòüÂçè‰Ωú': 80,
          'ÊäÄÂ∑ßÊìç‰Ωú': 90,
          '‰ºëÈó≤Â®±‰πê': 30,
          'ÂèØÁà±Ê≤ªÊÑà': 15
        }
      }
    };

    // Êé®ËçêÁÆóÊ≥ï - Âü∫‰∫éÁî®Êà∑DNAÂåπÈÖç
    const gameRecommendations = {
      'Á≠ñÁï•ÊÄùËÄÉ': [
        { name: '‰∏âÂõΩÂøó¬∑ÊàòÁï•Áâà', reason: 'Á°¨Ê†∏Á≠ñÁï•SLGÔºåÊª°Ë∂≥‰Ω†ÂØπÊ∑±Â∫¶Á≠ñÁï•ÁöÑÊ∏¥ÊúõÔºåÁúüÂÆûËøòÂéü‰∏âÂõΩ‰∫âÈú∏', icon: '‚öîÔ∏è' },
        { name: 'ÊñáÊòé6', reason: 'ÂõûÂêàÂà∂Á≠ñÁï•ÁªèÂÖ∏Ôºå‰ªéÁü≥Âô®Êó∂‰ª£Âª∫ËÆæÊñáÊòéÂ∏ùÂõΩÔºåÁ≠ñÁï•Ê∑±Â∫¶ÁàÜË°®', icon: 'üèõÔ∏è' }
      ],
      'Á´ûÊäÄÂØπÊäó': [
        { name: 'ÂíåÂπ≥Á≤æËã±', reason: 'ÊàòÊúØÁ´ûÊäÄÊ†áÊùÜÔºåÁôæ‰∫∫Á´ûÊäÄÁ¥ßÂº†Âà∫ÊøÄÔºåËÄÉÈ™å‰Ω†ÁöÑÁªºÂêàÂÆûÂäõ', icon: 'üéØ' },
        { name: 'APEXËã±ÈõÑÊâãÊ∏∏', reason: 'Ëã±ÈõÑÂ∞ÑÂáªÁ´ûÊäÄÔºåÂõ¢ÈòüÈÖçÂêà+‰∏™‰∫∫ÊäÄÂ∑ßÔºåÁ´ûÊäÄ‰ΩìÈ™åÊãâÊª°', icon: 'üöÄ' }
      ],
      '‰ºëÈó≤Â®±‰πê': [
        { name: 'ÂºÄÂøÉÊ∂àÊ∂à‰πê', reason: 'ÁªèÂÖ∏‰∏âÊ∂àÊ∏∏ÊàèÔºåÁÆÄÂçïÊòì‰∏äÊâãÔºåÁ¢éÁâáÊó∂Èó¥ÁöÑÂÆåÁæéÈÄâÊã©', icon: 'üç≠' },
        { name: 'ÊòüÈú≤Ë∞∑Áâ©ËØ≠', reason: 'Áî∞Âõ≠ÁîüÊ¥ªÊ®°ÊãüÔºåÁßçÁî∞ÈíìÈ±ºÊåñÁüøÔºåÊ≤ªÊÑàÁ≥ªfarmingÁ•û‰Ωú', icon: 'üå±' }
      ],
      'Á§æ‰∫§‰∫íÂä®': [
        { name: 'Among Us', reason: 'Â§™Á©∫Áãº‰∫∫ÊùÄÔºåÊúãÂèãËÅö‰ºöÂøÖÂ§áÔºåËÄÉÈ™åÊºîÊäÄÂíåÊé®ÁêÜËÉΩÂäõ', icon: 'üë•' },
        { name: 'QQÈ£ûËΩ¶', reason: 'Á´ûÈÄü+Á§æ‰∫§ÔºåÂíåÂ•ΩÂèã‰∏ÄËµ∑È£ôËΩ¶ÔºåËøòËÉΩÁßÄÁÇ´ÈÖ∑Êó∂Ë£Ö', icon: 'üèéÔ∏è' }
      ],
      'ÂèØÁà±Ê≤ªÊÑà': [
        { name: 'Êë©Â∞îÂ∫ÑÂõ≠', reason: 'Á´•Âπ¥ÂõûÂøÜÂ§çÊ¥ªÔºÅÁßçËèúÂÖªÊãâÂßÜÔºåÂíåÊúãÂèã‰∏ÄËµ∑ÈáçÊ∏©Á∫ØÁúüÊó∂ÂÖâ', icon: 'üêæ' },
        { name: 'Âä®Áâ©Ê£ÆÂèã‰ºö', reason: 'Êó†‰∫∫Â≤õÁîüÊ¥ªÊ®°ÊãüÔºåDIYË£ÖÊâÆÂÆ∂Âõ≠ÔºåË∂ÖÊ≤ªÊÑàÁöÑÊÖ¢ËäÇÂ•è‰ΩìÈ™å', icon: 'üèùÔ∏è' }
      ],
      'Êé¢Á¥¢ÂÜíÈô©': [
        { name: 'ÂéüÁ•û', reason: 'ÂºÄÊîæ‰∏ñÁïåRPGÔºå‰∏ÉÂõΩÂÜíÈô©Á≠â‰Ω†Êé¢Á¥¢ÔºåÁîªÈù¢Èü≥‰πêÈÉΩÊòØËâ∫ÊúØÂìÅÁ∫ßÂà´', icon: 'üåü' },
        { name: 'Â°ûÂ∞îËææ‰º†ËØ¥', reason: 'ÂºÄÊîæ‰∏ñÁïåÊé¢Á¥¢Ê†áÊùÜÔºåÊØè‰∏™ËßíËêΩÈÉΩÊúâÊÉäÂñúÁ≠âÁùÄ‰Ω†ÂèëÁé∞', icon: 'üó°Ô∏è' }
      ]
    };

    // DOM ÂÖÉÁ¥†
    const conversation = document.getElementById('conversation');
    const gameInput = document.getElementById('gameInput');
    const analyzeBtn = document.getElementById('analyzeBtn');

    // Â∑•ÂÖ∑ÂáΩÊï∞
    function addMessage(content, type = 'ai') {
      const msg = document.createElement('div');
      msg.className = `message ${type} slide-in`;
      msg.innerHTML = content;
      conversation.appendChild(msg);
      msg.scrollIntoView({ behavior: 'smooth', block: 'end' });
      return msg;
    }

    function showToast(text) {
      const toast = document.createElement('div');
      toast.className = 'toast';
      toast.textContent = text;
      document.body.appendChild(toast);
      setTimeout(() => toast.remove(), 2000);
    }

    // Ê∏≤ÊüìÁî®Êà∑ÁîªÂÉèÂç°Áâá
    function renderTasteProfile(game, profile) {
      return `
        <div class="taste-card">
          <h3>
            üß¨ ‰Ω†ÁöÑÊ∏∏ÊàèDNAËß£ËØª
          </h3>
          <div class="desc">${profile.analysis}</div>
          ${renderRadarChart(profile.dna)}
        </div>
      `;
    }

    // Ê∏≤ÊüìÈõ∑ËææÂõæ
    function renderRadarChart(dna) {
      const chartId = `radar_${Date.now()}`;
      return `
        <div class="radar-section">
          <div class="radar-wrap">
            <svg id="${chartId}" class="radar-canvas" viewBox="0 0 300 280">
              <defs>
                <radialGradient id="radarGrad" cx="50%" cy="50%" r="50%">
                  <stop offset="0%" style="stop-color:rgba(0,212,255,0.3)"/>
                  <stop offset="100%" style="stop-color:rgba(139,92,246,0.1)"/>
                </radialGradient>
              </defs>
            </svg>
            <div class="taste-legend">
              ${Object.entries(dna).map(([key, value], index) => `
                <div class="legend-item">
                  <div class="legend-dot" style="background: hsl(${index * 60}, 70%, 60%)"></div>
                  <span>${key}</span>
                  <span class="legend-level">${value}%</span>
                </div>
              `).join('')}
            </div>
          </div>
        </div>
      `;
    }

    // ÁªòÂà∂Èõ∑ËææÂõæ
    function drawRadarChart(chartId, dna) {
      const svg = document.getElementById(chartId);
      if (!svg) return;

      const center = { x: 150, y: 140 };
      const maxRadius = 100;
      const categories = Object.keys(dna);
      const values = Object.values(dna);
      const angleStep = (2 * Math.PI) / categories.length;

      // Ê∏ÖÈô§Áé∞ÊúâÂÜÖÂÆπ
      svg.innerHTML = svg.innerHTML; // ‰øùÁïôdefs

      // ÁªòÂà∂ËÉåÊôØÁΩëÊ†º
      for (let i = 1; i <= 5; i++) {
        const radius = (maxRadius / 5) * i;
        const points = categories.map((_, index) => {
          const angle = angleStep * index - Math.PI / 2;
          const x = center.x + Math.cos(angle) * radius;
          const y = center.y + Math.sin(angle) * radius;
          return `${x},${y}`;
        }).join(' ');
        
        const polygon = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
        polygon.setAttribute('points', points);
        polygon.setAttribute('class', 'radar-bg');
        polygon.style.fill = i === 5 ? 'rgba(255,255,255,0.02)' : 'none';
        polygon.style.stroke = 'rgba(255,255,255,0.06)';
        svg.appendChild(polygon);
      }

      // ÁªòÂà∂ËΩ¥Á∫ø
      categories.forEach((_, index) => {
        const angle = angleStep * index - Math.PI / 2;
        const x = center.x + Math.cos(angle) * maxRadius;
        const y = center.y + Math.sin(angle) * maxRadius;
        
        const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
        line.setAttribute('x1', center.x);
        line.setAttribute('y1', center.y);
        line.setAttribute('x2', x);
        line.setAttribute('y2', y);
        line.setAttribute('class', 'radar-grid');
        svg.appendChild(line);
      });

      // ÁªòÂà∂Êï∞ÊçÆÂå∫Âüü
      const dataPoints = values.map((value, index) => {
        const angle = angleStep * index - Math.PI / 2;
        const radius = (value / 100) * maxRadius;
        const x = center.x + Math.cos(angle) * radius;
        const y = center.y + Math.sin(angle) * radius;
        return `${x},${y}`;
      }).join(' ');

      const dataPolygon = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
      dataPolygon.setAttribute('points', dataPoints);
      dataPolygon.setAttribute('class', 'radar-area');
      svg.appendChild(dataPolygon);

      // ÁªòÂà∂Êï∞ÊçÆÁÇπ
      values.forEach((value, index) => {
        const angle = angleStep * index - Math.PI / 2;
        const radius = (value / 100) * maxRadius;
        const x = center.x + Math.cos(angle) * radius;
        const y = center.y + Math.sin(angle) * radius;
        
        const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
        circle.setAttribute('cx', x);
        circle.setAttribute('cy', y);
        circle.setAttribute('r', 4);
        circle.setAttribute('class', 'radar-point');
        svg.appendChild(circle);
      });

      // Ê∑ªÂä†Ê†áÁ≠æ
      categories.forEach((category, index) => {
        const angle = angleStep * index - Math.PI / 2;
        const labelRadius = maxRadius + 20;
        const x = center.x + Math.cos(angle) * labelRadius;
        const y = center.y + Math.sin(angle) * labelRadius;
        
        const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
        text.setAttribute('x', x);
        text.setAttribute('y', y + 4);
        text.setAttribute('class', 'radar-label');
        text.textContent = category;
        svg.appendChild(text);
      });
    }

    // ÁîüÊàêÊ∏∏ÊàèÊé®Ëçê
    function generateRecommendation(dna) {
      // ÊâæÂà∞ÊúÄÈ´òÂàÜÁöÑÂá†‰∏™Áª¥Â∫¶
      const sortedTraits = Object.entries(dna)
        .sort(([,a], [,b]) => b - a)
        .slice(0, 2);
      
      const primaryTrait = sortedTraits[0][0];
      const recs = gameRecommendations[primaryTrait] || gameRecommendations['‰ºëÈó≤Â®±‰πê'];
      const selectedGame = recs[Math.floor(Math.random() * recs.length)];
      
      return selectedGame;
    }

    // Ê∏≤ÊüìÊé®ËçêÂç°Áâá
    function renderRecommendation(game) {
      return `
        <div class="game-rec">
          <h3>üéØ ‰∏∫‰Ω†Á≤æÈÄâÊé®Ëçê</h3>
          <div class="game-showcase">
            <div class="game-cover">
              <div style="font-size: 24px;">${game.icon}</div>
            </div>
            <div class="game-info">
              <div class="game-title">${game.name}</div>
              <div class="game-reason">${game.reason}</div>
              <div class="game-actions">
                <button class="btn-primary" onclick="openGame('${game.name}')">Á´ãÂç≥‰ΩìÈ™å</button>
                <button class="btn-ghost" onclick="saveGame('${game.name}')">Âä†ÂÖ•ÂøÉÊÑøÂçï</button>
              </div>
            </div>
          </div>
        </div>
      `;
    }

    // Ê∏≤ÊüìÂèçÈ¶àÂç°Áâá
    function renderFeedback() {
      return `
        <div class="feedback-card">
          <h3>üíù Ëøô‰∏™Êé®ËçêÊÄé‰πàÊ†∑Ôºü</h3>
          <div class="feedback-actions">
            <button class="btn-primary" onclick="handleFeedback(true)">üéâ ÂæàÂêàÊàëÂè£Âë≥</button>
            <button class="btn-ghost" onclick="handleFeedback(false)">ü§î ‰∏çÂ§™ÂØπË∑Ø</button>
          </div>
          <div class="feedback-note">
            ‰Ω†ÁöÑÂèçÈ¶àÂ∏ÆÂä©Êàë‰ª¨Êõ¥ÊáÇ‰Ω†ÁöÑÊ∏∏ÊàèÂìÅÂë≥ ‚ú®
          </div>
        </div>
      `;
    }

    // Ê∏≤ÊüìÁ≤æÁªÜÂåñË∞ÉÊï¥Ë°®Âçï
    function renderRefineForm() {
      return `
        <div class="refine-form">
          <h3>üéõÔ∏è ÂëäËØâÊàë‰Ω†Êõ¥ÂÖ∑‰ΩìÁöÑÂñúÂ•Ω</h3>
          <div class="filter-group">
            <div class="filter-label">Ê∏∏ÊàèËäÇÂ•è</div>
            <div class="filter-options">
              <div class="filter-chip" data-filter="pace" data-value="Âø´ËäÇÂ•è">Âø´ËäÇÂ•è</div>
              <div class="filter-chip" data-filter="pace" data-value="‰∏≠Á≠âËäÇÂ•è">‰∏≠Á≠âËäÇÂ•è</div>
              <div class="filter-chip" data-filter="pace" data-value="ÊÖ¢ËäÇÂ•è">ÊÖ¢ËäÇÂ•è</div>
            </div>
          </div>
          <div class="filter-group">
            <div class="filter-label">Ê∏∏ÊàèÊó∂Èïø</div>
            <div class="filter-options">
              <div class="filter-chip" data-filter="duration" data-value="5ÂàÜÈíü‰ª•ÂÜÖ">5ÂàÜÈíü‰ª•ÂÜÖ</div>
              <div class="filter-chip" data-filter="duration" data-value="10-30ÂàÜÈíü">10-30ÂàÜÈíü</div>
              <div class="filter-chip" data-filter="duration" data-value="1Â∞èÊó∂‰ª•‰∏ä">1Â∞èÊó∂‰ª•‰∏ä</div>
            </div>
          </div>
          <div class="filter-group">
            <div class="filter-label">‰ªòË¥πÊ®°Âºè</div>
            <div class="filter-options">
              <div class="filter-chip" data-filter="payment" data-value="ÂÆåÂÖ®ÂÖçË¥π">ÂÆåÂÖ®ÂÖçË¥π</div>
              <div class="filter-chip" data-filter="payment" data-value="ËΩªÂ∫¶‰ªòË¥π">ËΩªÂ∫¶‰ªòË¥π</div>
              <div class="filter-chip" data-filter="payment" data-value="‰π∞Êñ≠Âà∂">‰π∞Êñ≠Âà∂</div>
            </div>
          </div>
          <div class="filter-group">
            <div class="filter-label">ÁæéÊúØÈ£éÊ†º</div>
            <div class="filter-options">
              <div class="filter-chip" data-filter="art" data-value="ÂÜôÂÆûÈ£éÊ†º">ÂÜôÂÆûÈ£éÊ†º</div>
              <div class="filter-chip" data-filter="art" data-value="Âç°ÈÄöÂèØÁà±">Âç°ÈÄöÂèØÁà±</div>
              <div class="filter-chip" data-filter="art" data-value="ÂÉèÁ¥†Â§çÂè§">ÂÉèÁ¥†Â§çÂè§</div>
              <div class="filter-chip" data-filter="art" data-value="‰∫åÊ¨°ÂÖÉ">‰∫åÊ¨°ÂÖÉ</div>
            </div>
          </div>
          <div style="margin-top: 20px;">
            <button class="btn-primary" onclick="generateCustomRecommendation()" style="width: 100%;">
              üéØ Âü∫‰∫éÊàëÁöÑÂñúÂ•ΩÈáçÊñ∞Êé®Ëçê
            </button>
          </div>
        </div>
      `;
    }

    // ‰∏ªË¶ÅÂàÜÊûêÂáΩÊï∞
    function analyzeGame() {
      const gameName = gameInput.value.trim();
      if (!gameName) {
        showToast('ËØ∑ÂëäËØâÊàë‰Ω†Âú®Áé©‰ªÄ‰πàÊ∏∏Êàè üòä');
        return;
      }

      // Ê∑ªÂä†Áî®Êà∑Ê∂àÊÅØ
      addMessage(`ÊàëÊúÄËøëÂú®Áé©Ôºö<strong>${gameName}</strong>`, 'user');

      // ÊòæÁ§∫ÂàÜÊûê‰∏≠Áä∂ÊÄÅ
      const thinkingMsg = addMessage(`
        <div class="thinking">
          <span>Ê≠£Âú®ÂàÜÊûê‰Ω†ÁöÑÊ∏∏ÊàèÂìÅÂë≥</span>
          <div class="thinking-dot"></div>
          <div class="thinking-dot"></div>
          <div class="thinking-dot"></div>
        </div>
      `);

      // Ê®°ÊãüÂàÜÊûêËøáÁ®ã
      setTimeout(() => {
        thinkingMsg.remove();
        
        // Ëé∑ÂèñÊ∏∏ÊàèÊ°£Ê°àÊàñ‰ΩøÁî®ÈªòËÆ§
        const profile = gameProfiles[gameName] || gameProfiles['Á¨¨‰∫î‰∫∫Ê†º'];
        
        // Ê∑ªÂä†ÂàÜÊûêÁªìÊûú
        const profileMsg = addMessage(renderTasteProfile(gameName, profile));
        
        // Âª∂ËøüÁªòÂà∂Èõ∑ËææÂõæÁ°Æ‰øùDOMÂ∑≤Ê∏≤Êüì
        setTimeout(() => {
          const chartId = profileMsg.querySelector('svg').id;
          drawRadarChart(chartId, profile.dna);
        }, 100);

        // ÁîüÊàêÊé®Ëçê
        setTimeout(() => {
          const recommendation = generateRecommendation(profile.dna);
          addMessage(renderRecommendation(recommendation));
          
          // Ê∑ªÂä†ÂèçÈ¶àËØ∑Ê±Ç
          setTimeout(() => {
            addMessage(renderFeedback());
          }, 800);
        }, 1200);
        
      }, 2000);

      // Ê∏ÖÁ©∫ËæìÂÖ•Ê°Ü
      gameInput.value = '';
    }

    // ÂèçÈ¶àÂ§ÑÁêÜ
    function handleFeedback(positive) {
      if (positive) {
        addMessage(`
          <div class="taste-card">
            <h3>üéâ Â§™Â•Ω‰∫ÜÔºÅ</h3>
            <div class="desc" style="color: var(--brand3);">
              ÊàëÂ∑≤ÁªèËÆ∞‰Ωè‰∫Ü‰Ω†ÁöÑÂñúÂ•ΩÔºå‰∏ãÊ¨°Êé®Ëçê‰ºöÊõ¥Á≤æÂáÜ„ÄÇ<br>
              <strong>ÁªßÁª≠ÂëäËØâÊàëÂÖ∂‰ªñÊ∏∏ÊàèÔºåËÆ©ÊàëÊõ¥ÊáÇ‰Ω†ÁöÑÂìÅÂë≥ÂêßÔºÅ</strong>
            </div>
          </div>
        `);
      } else {
        addMessage(renderRefineForm());
      }
    }

    // Á≤æÁªÜÂåñÊé®Ëçê
    function generateCustomRecommendation() {
      const selectedFilters = {};
      document.querySelectorAll('.filter-chip.selected').forEach(chip => {
        const filter = chip.dataset.filter;
        const value = chip.dataset.value;
        if (!selectedFilters[filter]) selectedFilters[filter] = [];
        selectedFilters[filter].push(value);
      });

      // Âü∫‰∫éÁ≠õÈÄâÊù°‰ª∂ÁîüÊàêÊé®Ëçê
      let customGame = {
        name: 'ÈáèË∫´ÂÆöÂà∂Êé®Ëçê',
        reason: 'Âü∫‰∫é‰Ω†ÁöÑÂÖ∑‰ΩìÂñúÂ•ΩÁ≤æÂøÉÊåëÈÄâ',
        icon: '‚ú®'
      };

      // Ê†πÊçÆÁ≠õÈÄâÊù°‰ª∂Ë∞ÉÊï¥Êé®Ëçê
      if (selectedFilters.pace?.includes('Âø´ËäÇÂ•è') && selectedFilters.duration?.includes('5ÂàÜÈíü‰ª•ÂÜÖ')) {
        customGame = {
          name: 'ËçíÈáé‰π±Êñó',
          reason: '3ÂàÜÈíüÂø´ËäÇÂ•èÂØπÊàòÔºåÊìç‰ΩúÁÆÄÂçï‰ΩÜÁ≠ñÁï•‰∏∞ÂØåÔºåÂÆåÁæéÂåπÈÖç‰Ω†ÁöÑÈúÄÊ±Ç',
          icon: '‚ö°'
        };
      } else if (selectedFilters.art?.includes('Âç°ÈÄöÂèØÁà±') && selectedFilters.payment?.includes('ÂÆåÂÖ®ÂÖçË¥π')) {
        customGame = {
          name: 'Á≥ñË±Ü‰∫∫ÁªàÊûÅÊ∑òÊ±∞Ëµõ',
          reason: 'ËêåË∂£ÂèØÁà±ÁöÑÁ´ûÊäÄÈóØÂÖ≥ÔºåÂÖçË¥πÊ∏∏Áé©ÔºåÂíåÊúãÂèã‰∏ÄËµ∑Âø´‰πêÊëîË∑§',
          icon: 'üç≠'
        };
      } else if (selectedFilters.duration?.includes('1Â∞èÊó∂‰ª•‰∏ä') && selectedFilters.art?.includes('‰∫åÊ¨°ÂÖÉ')) {
        customGame = {
          name: 'ÂéüÁ•û',
          reason: 'Á≤æÁæé‰∫åÊ¨°ÂÖÉÂºÄÊîæ‰∏ñÁïåÔºåÂâßÊÉÖ‰∏∞ÂØåÂèØÊ∑±Â∫¶Ê∏∏Áé©ÔºåËßÜËßâÂê¨ËßâÂèåÈáç‰∫´Âèó',
          icon: 'üåü'
        };
      }

      addMessage(`
        <div class="taste-card">
          <h3>üîß Ê†πÊçÆ‰Ω†ÁöÑÂñúÂ•ΩË∞ÉÊï¥ÂÆåÊØï</h3>
          <div class="desc">Á≠õÈÄâÊù°‰ª∂Ôºö${JSON.stringify(selectedFilters)}</div>
        </div>
      `);
      
      addMessage(renderRecommendation(customGame));
    }

    // Â∑•ÂÖ∑ÂáΩÊï∞
    function openGame(gameName) {
      showToast(`Ê≠£Âú®‰∏∫‰Ω†Ë∑≥ËΩ¨Âà∞ ${gameName} üöÄ`);
      // ËøôÈáåÂèØ‰ª•Ê∑ªÂä†ÂÆûÈôÖÁöÑË∑≥ËΩ¨ÈÄªËæë
    }

    function saveGame(gameName) {
      showToast(`${gameName} Â∑≤Âä†ÂÖ•‰Ω†ÁöÑÂøÉÊÑøÂçï üíù`);
      // ËøôÈáåÂèØ‰ª•Ê∑ªÂä†‰øùÂ≠òÈÄªËæë
    }

    // Á≠õÈÄâÊ†áÁ≠æÁÇπÂáªÂ§ÑÁêÜ
    document.addEventListener('click', (e) => {
      if (e.target.classList.contains('filter-chip')) {
        e.target.classList.toggle('selected');
      }
    });

    // ‰∫ã‰ª∂ÁõëÂê¨Âô®
    analyzeBtn.addEventListener('click', analyzeGame);
    gameInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') analyzeGame();
    });

    // Âø´Êç∑Ê†áÁ≠æÁÇπÂáª
    document.querySelectorAll('.tag').forEach(tag => {
      tag.addEventListener('click', () => {
        gameInput.value = tag.dataset.game;
        analyzeGame();
      });
    });

    // Êö¥Èú≤ÂÖ®Â±ÄÂáΩÊï∞‰æõonclickË∞ÉÁî®
    window.handleFeedback = handleFeedback;
    window.generateCustomRecommendation = generateCustomRecommendation;
    window.openGame = openGame;
    window.saveGame = saveGame;

    // Ëá™Ê£ÄÊµãËØï
    setTimeout(() => {
      const tests = [
        { name: 'Ê∏∏ÊàèÊ°£Ê°àÊï∞ÊçÆÂä†ËΩΩ', pass: Object.keys(gameProfiles).length > 0 },
        { name: 'Êé®ËçêÁ≥ªÁªüÂàùÂßãÂåñ', pass: Object.keys(gameRecommendations).length > 0 },
        { name: 'DOMÂÖÉÁ¥†ÊåÇËΩΩ', pass: !!document.getElementById('conversation') },
        { name: 'ÂÖ®Â±ÄÂáΩÊï∞Êö¥Èú≤', pass: typeof window.handleFeedback === 'function' }
      ];
      
      const allPassed = tests.every(t => t.pass);
      const toast = document.createElement('div');
      toast.className = 'toast';
      toast.style.background = allPassed ? 'rgba(16,185,129,0.2)' : 'rgba(239,68,68,0.2)';
      toast.style.borderColor = allPassed ? 'rgba(16,185,129,0.4)' : 'rgba(239,68,68,0.4)';
      toast.innerHTML = `${allPassed ? '‚úÖ' : '‚ùå'} Á≥ªÁªüËá™Ê£Ä ¬∑ ${tests.map(t => `${t.pass ? '‚úì' : '‚úó'} ${t.name}`).join(' | ')}`;
      document.body.appendChild(toast);
      setTimeout(() => toast.remove(), 3000);
    }, 500);
  </script>
</body>
</html>