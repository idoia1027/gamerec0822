<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>æ¸¸æˆå“å‘³é›·è¾¾ Â· æ‡‚ä½ çš„æ¸¸æˆæ™ºèƒ½æ¨è</title>
  <style>
    :root{
      --bg:#0a0d16; --bg1:#0e1220; --bg2:#151B2E;
      --brand1:#00d4ff; --brand2:#8b5cf6; --brand3:#10b981;
      --accent:#ff6b6b; --gold:#fbbf24;
      --muted:#94a3b8; --glass: rgba(255,255,255,.08);
      --outline: rgba(255,255,255,.12); --ring: rgba(0,212,255,.3);
      --shadow: 0 25px 70px rgba(0,0,0,.4);
      --glow: 0 0 30px rgba(0,212,255,.2);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family: 'SF Pro Display', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, 'PingFang SC', sans-serif;
      background:
        radial-gradient(1400px 700px at 80% -15%, rgba(0,212,255,.15), transparent 65%),
        radial-gradient(1200px 900px at -15% 110%, rgba(139,92,246,.18), transparent 65%),
        radial-gradient(800px 600px at 50% 50%, rgba(16,185,129,.08), transparent 70%),
        linear-gradient(150deg, var(--bg1), var(--bg2));
      color:#f1f5f9; min-height:100vh; overflow-x:hidden;
    }
    .app{max-width:440px;margin:0 auto;min-height:100vh;display:flex;flex-direction:column;position:relative}

    .header{position:sticky;top:0;z-index:20;backdrop-filter: blur(15px);
      background: linear-gradient(180deg, rgba(10,13,22,.9), rgba(10,13,22,.4) 70%, transparent);
      padding:20px 18px 14px;border-bottom:1px solid var(--outline);display:flex;gap:14px;align-items:center}
    .logo{width:38px;height:38px;border-radius:12px;
      background:conic-gradient(from 200deg, var(--brand1), var(--brand2), var(--accent));
      box-shadow:var(--glow), inset 0 0 20px rgba(255,255,255,.1);
      position:relative;overflow:hidden}
    .logo::after{content:'ğŸ®';position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-size:18px}
    .title{font-weight:900;letter-spacing:-.02em;font-size:18px}
    .subtitle{font-size:13px;color:var(--muted);margin-top:1px}

    .input-section{padding:0 18px 8px}
    .input-bar{display:flex;gap:12px;align-items:center;background:var(--glass);
      border:1px solid var(--outline);border-radius:20px;padding:12px 16px;
      box-shadow: var(--shadow);transition:all .3s ease;position:relative;overflow:hidden}
    .input-bar::before{content:'';position:absolute;inset:0;background:linear-gradient(45deg, transparent, rgba(0,212,255,.02), transparent);opacity:0;transition:opacity .3s}
    .input-bar:hover::before{opacity:1}
    .input-bar:hover{border-color:rgba(0,212,255,.3);box-shadow:var(--shadow),var(--glow)}
    .input-bar input{flex:1;background:transparent;border:none;outline:none;color:#fff;font-size:16px;font-weight:500}
    .input-bar input::placeholder{color:var(--muted)}
    .input-bar button{border:none;cursor:pointer;color:#0a0d16;font-weight:800;border-radius:16px;
      background:linear-gradient(135deg,var(--brand1),var(--brand2)); padding:12px 20px; 
      box-shadow:0 15px 40px var(--ring);transition:all .2s ease;position:relative}
    .input-bar button:hover{transform:translateY(-1px);box-shadow:0 20px 50px var(--ring)}

    .quick-tags{display:flex;flex-wrap:wrap;gap:10px;padding:12px 18px}
    .tag{padding:10px 16px;border-radius:20px;background:linear-gradient(135deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      border:1px solid var(--outline);font-size:13px;color:#e2e8f0;cursor:pointer;transition:all .3s;
      position:relative;overflow:hidden;font-weight:600}
    .tag::before{content:'';position:absolute;inset:0;background:linear-gradient(45deg, var(--brand1), var(--brand2));opacity:0;transition:opacity .3s}
    .tag:hover{transform:translateY(-2px); box-shadow:0 10px 25px rgba(0,0,0,.3)}
    .tag:hover::before{opacity:.1}

    .timeline{display:flex;flex-direction:column;gap:16px;padding:12px 16px 120px}
    .message{border:1px solid var(--outline);background:rgba(14,18,32,.7);backdrop-filter: blur(15px);
      border-radius:24px;padding:18px;box-shadow: var(--shadow);position:relative}
    .message.ai{align-self:flex-start;max-width:95%}
    .message.user{align-self:flex-end;max-width:85%;background:linear-gradient(135deg, rgba(0,212,255,.08), rgba(139,92,246,.08));}
    .message::before{content:'';position:absolute;inset:0;border-radius:24px;background:linear-gradient(45deg, transparent, rgba(255,255,255,.02), transparent);pointer-events:none}

    .taste-card{border:1px solid var(--outline);background:rgba(15,19,35,.8);backdrop-filter: blur(15px); 
      border-radius:24px;padding:20px;box-shadow: var(--shadow);position:relative;overflow:hidden}
    .taste-card::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;
      background:linear-gradient(90deg, var(--brand1), var(--brand2), var(--accent));opacity:.8}
    .taste-card h3{margin:0 0 12px 0;font-size:17px;font-weight:800;display:flex;align-items:center;gap:8px}
    .taste-card .desc{color:var(--muted);line-height:1.5;font-size:14px}

    .radar-section{margin-top:16px}
    .radar-wrap{position:relative;background:rgba(10,13,22,.6);border-radius:20px;padding:20px;
      border:1px solid rgba(255,255,255,.08)}
    .radar-canvas{width:100%;height:280px;border-radius:16px}
    .taste-legend{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:16px}
    .legend-item{display:flex;align-items:center;gap:8px;padding:8px 12px;
      background:rgba(255,255,255,.04);border-radius:12px;font-size:12px}
    .legend-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0}
    .legend-level{color:var(--muted);margin-left:auto;font-weight:600}

    .game-rec{border:1px solid var(--outline);background:rgba(15,19,35,.8);backdrop-filter: blur(15px); 
      border-radius:24px;padding:20px;box-shadow: var(--shadow);position:relative}
    .game-rec::before{content:'';position:absolute;top:0;left:0;right:0;height:2px;
      background:linear-gradient(90deg, var(--accent), var(--gold));opacity:.9}
    .game-rec h3{margin:0 0 16px 0;font-size:17px;font-weight:800;color:var(--accent)}

    .game-showcase{display:flex;gap:16px;align-items:flex-start}
    .game-cover{width:72px;height:72px;border-radius:16px;position:relative;overflow:hidden;
      background:linear-gradient(135deg, var(--brand2), var(--accent));display:flex;align-items:center;justify-content:center;
      box-shadow:0 15px 35px rgba(139,92,246,.3)}
    .game-cover::after{content:'ğŸ¯';font-size:28px;filter:drop-shadow(0 2px 4px rgba(0,0,0,.3))}
    .game-info{flex:1;min-width:0}
    .game-title{font-weight:900;font-size:16px;margin-bottom:8px;color:#fff}
    .game-reason{color:var(--muted);line-height:1.5;font-size:14px;margin-bottom:14px}
    .game-actions{display:flex;gap:10px;flex-wrap:wrap}
    .btn-primary{background:linear-gradient(135deg,var(--accent),var(--gold));border:none;padding:10px 18px;
      border-radius:16px;font-weight:800;color:#0a0d16;cursor:pointer;font-size:14px;
      box-shadow:0 12px 30px rgba(255,107,107,.25);transition:all .2s}
    .btn-primary:hover{transform:translateY(-1px);box-shadow:0 16px 40px rgba(255,107,107,.35)}
    .btn-ghost{border:1px solid var(--outline);background:rgba(255,255,255,.06);padding:10px 16px;
      border-radius:16px;font-weight:700;color:#e5e7eb;cursor:pointer;font-size:14px;transition:all .2s}
    .btn-ghost:hover{background:rgba(255,255,255,.1);transform:translateY(-1px)}

    .feedback-card{border:1px solid var(--outline);background:rgba(15,19,35,.8);backdrop-filter: blur(15px); 
      border-radius:24px;padding:20px;box-shadow: var(--shadow)}
    .feedback-actions{display:flex;gap:12px;margin-top:12px}
    .feedback-note{color:var(--muted);font-size:13px;margin-top:12px;line-height:1.4}

    .refine-form{border:1px solid var(--outline);background:rgba(15,19,35,.8);backdrop-filter: blur(15px); 
      border-radius:24px;padding:20px;box-shadow: var(--shadow)}
    .filter-group{margin:12px 0}
    .filter-label{font-size:13px;color:var(--muted);margin-bottom:6px;font-weight:600}
    .filter-options{display:flex;flex-wrap:wrap;gap:6px}
    .filter-chip{padding:8px 14px;border-radius:16px;border:1px solid var(--outline);
      background:rgba(255,255,255,.04);font-size:12px;color:#d7dff0;cursor:pointer;
      transition:all .2s;position:relative;font-weight:500}
    .filter-chip:hover{background:rgba(255,255,255,.08)}
    .filter-chip.selected{background:linear-gradient(135deg, rgba(0,212,255,.15), rgba(139,92,246,.15));
      border-color:rgba(0,212,255,.4);color:var(--brand1);box-shadow:0 0 15px rgba(0,212,255,.1)}

    .thinking{display:inline-flex;gap:6px;align-items:center;color:var(--brand1)}
    .thinking-dot{width:6px;height:6px;border-radius:50%;background:currentColor;
      animation: pulse 1.4s infinite ease-in-out}
    .thinking-dot:nth-child(2){animation-delay:.2s}
    .thinking-dot:nth-child(3){animation-delay:.4s}
    @keyframes pulse{0%,80%,100%{transform:scale(.6);opacity:.3}40%{transform:scale(1);opacity:1}}

    .slide-in{animation:slideIn .4s ease-out forwards;opacity:0;transform:translateY(10px)}
    @keyframes slideIn{to{opacity:1;transform:translateY(0)}}

    .toast{position:fixed;top:20px;left:50%;transform:translateX(-50%);
      background:rgba(0,0,0,.8);border:1px solid var(--outline);backdrop-filter:blur(10px);
      padding:10px 16px;border-radius:12px;font-size:13px;z-index:999;font-weight:500}

    /* ç¾åŒ–é›·è¾¾å›¾æ ·å¼ */
    .radar-bg{fill:rgba(255,255,255,.02);stroke:rgba(255,255,255,.08);stroke-width:1}
    .radar-grid{stroke:rgba(255,255,255,.06);stroke-width:1;fill:none}
    .radar-area{fill:url(#radarGrad);stroke:rgba(0,212,255,.6);stroke-width:2;opacity:.8}
    .radar-point{fill:var(--brand1);stroke:#fff;stroke-width:2;filter:drop-shadow(0 2px 6px rgba(0,212,255,.4))}
    .radar-label{fill:#cbd5e1;font-size:11px;font-weight:600;text-anchor:middle}
  </style>
</head>
<body>
  <div class="app">
    <div class="header">
      <div class="logo"></div>
      <div>
        <div class="title">æ¸¸æˆå“å‘³é›·è¾¾</div>
        <div class="subtitle">AI è¯»æ‡‚ä½ çš„æ¸¸æˆDNAï¼Œç²¾å‡†æ¨èå¥½æ¸¸æˆ</div>
      </div>
    </div>

    <div class="input-section">
      <div class="input-bar">
        <input id="gameInput" placeholder="è¯´è¯´ä½ æœ€è¿‘åœ¨ç©ä»€ä¹ˆæ¸¸æˆ..." />
        <button id="analyzeBtn">åˆ†ææˆ‘çš„å“å‘³</button>
      </div>
    </div>

    <div class="quick-tags">
      <div class="tag" data-game="ç¬¬äº”äººæ ¼">ç¬¬äº”äººæ ¼</div>
      <div class="tag" data-game="è›‹ä»”æ´¾å¯¹">è›‹ä»”æ´¾å¯¹</div>
      <div class="tag" data-game="å…‰Â·é‡">å…‰Â·é‡</div>
      <div class="tag" data-game="ç‹è€…è£è€€">ç‹è€…è£è€€</div>
    </div>

    <div id="conversation" class="timeline">
      <div class="message ai slide-in">
        <div style="display:flex;align-items:center;gap:8px;margin-bottom:8px">
          <span style="font-size:20px">ğŸ¤–</span>
          <strong style="font-size:16px">ä½ çš„æ¸¸æˆå“å‘³é¡¾é—®</strong>
        </div>
        <div style="color:var(--muted);line-height:1.5">
          å—¨ï¼æˆ‘æ˜¯ä½ çš„ä¸“å±æ¸¸æˆå“å‘³åˆ†æå¸ˆã€‚<br>
          å‘Šè¯‰æˆ‘ä½ æœ€è¿‘åœ¨ç©çš„æ¸¸æˆï¼Œæˆ‘æ¥åˆ†æä½ çš„<span style="color:var(--brand1);font-weight:700">æ¸¸æˆDNA</span>ï¼Œ
          ä¸ºä½ æ¨èæœ€åˆå£å‘³çš„æ–°æ¸¸æˆ âœ¨
        </div>
      </div>
    </div>
  </div>

  <script>
    // æ¸¸æˆæ•°æ®åº“ - æ›´çœŸå®çš„ç”¨æˆ·ç”»åƒå’Œæ¨è
    const gameProfiles = {
      'ç¬¬äº”äººæ ¼': {
        analysis: 'ä½ æ˜¯ä¸ª<span style="color:var(--accent);font-weight:700">ç­–ç•¥æ€ç»´è€…</span>ï¼å–œæ¬¢åœ¨ç´§å¼ åˆºæ¿€ä¸­åŠ¨è„‘ç­‹ï¼Œäº«å—ä¸å¯¹ç§°ç«æŠ€çš„å¿ƒç†åšå¼ˆã€‚ä½ å¯¹æ¸¸æˆçš„<span style="color:var(--brand1)">å…¬å¹³æ€§</span>å¾ˆåœ¨æ„ï¼Œæ„¿æ„ä¸ºä¼˜è´¨ä½“éªŒä»˜è´¹ï¼Œä½†è®¨åŒè¿‡åº¦æ°ªé‡‘ã€‚',
        dna: {
          'ç­–ç•¥æ€è€ƒ': 95,
          'ç«æŠ€å¯¹æŠ—': 80,
          'æ‚¬ç–‘è§£è°œ': 75,
          'å›¢é˜Ÿåä½œ': 60,
          'ä¼‘é—²å¨±ä¹': 30,
          'æ”¶é›†å…»æˆ': 45
        }
      },
      'è›‹ä»”æ´¾å¯¹': {
        analysis: 'ä½ æ˜¯ä¸ª<span style="color:var(--gold);font-weight:700">å¿«ä¹ä¸»ä¹‰è€…</span>ï¼åçˆ±è½»æ¾ææ€ªçš„å¤šäººæ¸¸æˆï¼Œå–œæ¬¢å’Œæœ‹å‹ä¸€èµ·å“ˆå“ˆå¤§ç¬‘ã€‚ä½ ä¸å¤ªåœ¨ä¹è¾“èµ¢ï¼Œæ›´äº«å—æ¸¸æˆè¿‡ç¨‹ä¸­çš„<span style="color:var(--brand3)">ç¤¾äº¤ä¹è¶£</span>ã€‚',
        dna: {
          'ä¼‘é—²å¨±ä¹': 95,
          'ç¤¾äº¤äº’åŠ¨': 85,
          'å¯çˆ±æ²»æ„ˆ': 80,
          'å›¢é˜Ÿåä½œ': 70,
          'ç«æŠ€å¯¹æŠ—': 40,
          'ç­–ç•¥æ€è€ƒ': 25
        }
      },
      'å…‰Â·é‡': {
        analysis: 'ä½ æ˜¯ä¸ª<span style="color:var(--brand3);font-weight:700">æƒ…æ„Ÿä½“éªŒè€…</span>ï¼è¿½æ±‚æ¸¸æˆä¸­çš„ç¾æ„Ÿå’Œæƒ…æ„Ÿå…±é¸£ï¼Œå–œæ¬¢æ¸©æš–æ²»æ„ˆçš„ç¤¾äº¤ä½“éªŒã€‚ä½ æ›´çœ‹é‡æ¸¸æˆçš„<span style="color:var(--brand2)">è‰ºæœ¯ä»·å€¼</span>ï¼Œä¸å–œæ¬¢æ¿€çƒˆç«äº‰ã€‚',
        dna: {
          'å¯çˆ±æ²»æ„ˆ': 95,
          'ç¤¾äº¤äº’åŠ¨': 80,
          'è‰ºæœ¯ç¾å­¦': 90,
          'æ¢ç´¢å†’é™©': 70,
          'ç«æŠ€å¯¹æŠ—': 20,
          'ç­–ç•¥æ€è€ƒ': 35
        }
      },
      'ç‹è€…è£è€€': {
        analysis: 'ä½ æ˜¯ä¸ª<span style="color:var(--accent);font-weight:700">ç«æŠ€ä¹‹ç‹</span>ï¼çƒ­è¡·äºMOBAçš„ç­–ç•¥å¯¹æŠ—ï¼Œäº«å—å›¢é˜Ÿé…åˆå‡»è´¥å¯¹æ‰‹çš„å¿«æ„Ÿã€‚ä½ å¯¹æ¸¸æˆ<span style="color:var(--brand1)">æ“ä½œæ‰‹æ„Ÿ</span>è¦æ±‚å¾ˆé«˜ï¼Œæ„¿æ„æŠ•å…¥æ—¶é—´é’»ç ”ã€‚',
        dna: {
          'ç«æŠ€å¯¹æŠ—': 95,
          'ç­–ç•¥æ€è€ƒ': 85,
          'å›¢é˜Ÿåä½œ': 80,
          'æŠ€å·§æ“ä½œ': 90,
          'ä¼‘é—²å¨±ä¹': 30,
          'å¯çˆ±æ²»æ„ˆ': 15
        }
      }
    };

    // æ¨èç®—æ³• - åŸºäºç”¨æˆ·DNAåŒ¹é…
    const gameRecommendations = {
      'ç­–ç•¥æ€è€ƒ': [
        { name: 'ä¸‰å›½å¿—Â·æˆ˜ç•¥ç‰ˆ', reason: 'ç¡¬æ ¸ç­–ç•¥SLGï¼Œæ»¡è¶³ä½ å¯¹æ·±åº¦ç­–ç•¥çš„æ¸´æœ›ï¼ŒçœŸå®è¿˜åŸä¸‰å›½äº‰éœ¸', icon: 'âš”ï¸' },
        { name: 'æ–‡æ˜6', reason: 'å›åˆåˆ¶ç­–ç•¥ç»å…¸ï¼Œä»çŸ³å™¨æ—¶ä»£å»ºè®¾æ–‡æ˜å¸å›½ï¼Œç­–ç•¥æ·±åº¦çˆ†è¡¨', icon: 'ğŸ›ï¸' }
      ],
      'ç«æŠ€å¯¹æŠ—': [
        { name: 'å’Œå¹³ç²¾è‹±', reason: 'æˆ˜æœ¯ç«æŠ€æ ‡æ†ï¼Œç™¾äººç«æŠ€ç´§å¼ åˆºæ¿€ï¼Œè€ƒéªŒä½ çš„ç»¼åˆå®åŠ›', icon: 'ğŸ¯' },
        { name: 'APEXè‹±é›„æ‰‹æ¸¸', reason: 'è‹±é›„å°„å‡»ç«æŠ€ï¼Œå›¢é˜Ÿé…åˆ+ä¸ªäººæŠ€å·§ï¼Œç«æŠ€ä½“éªŒæ‹‰æ»¡', icon: 'ğŸš€' }
      ],
      'ä¼‘é—²å¨±ä¹': [
        { name: 'å¼€å¿ƒæ¶ˆæ¶ˆä¹', reason: 'ç»å…¸ä¸‰æ¶ˆæ¸¸æˆï¼Œç®€å•æ˜“ä¸Šæ‰‹ï¼Œç¢ç‰‡æ—¶é—´çš„å®Œç¾é€‰æ‹©', icon: 'ğŸ­' },
        { name: 'æ˜Ÿéœ²è°·ç‰©è¯­', reason: 'ç”°å›­ç”Ÿæ´»æ¨¡æ‹Ÿï¼Œç§ç”°é’“é±¼æŒ–çŸ¿ï¼Œæ²»æ„ˆç³»farmingç¥ä½œ', icon: 'ğŸŒ±' }
      ],
      'ç¤¾äº¤äº’åŠ¨': [
        { name: 'Among Us', reason: 'å¤ªç©ºç‹¼äººæ€ï¼Œæœ‹å‹èšä¼šå¿…å¤‡ï¼Œè€ƒéªŒæ¼”æŠ€å’Œæ¨ç†èƒ½åŠ›', icon: 'ğŸ‘¥' },
        { name: 'QQé£è½¦', reason: 'ç«é€Ÿ+ç¤¾äº¤ï¼Œå’Œå¥½å‹ä¸€èµ·é£™è½¦ï¼Œè¿˜èƒ½ç§€ç‚«é…·æ—¶è£…', icon: 'ğŸï¸' }
      ],
      'å¯çˆ±æ²»æ„ˆ': [
        { name: 'æ‘©å°”åº„å›­', reason: 'ç«¥å¹´å›å¿†å¤æ´»ï¼ç§èœå…»æ‹‰å§†ï¼Œå’Œæœ‹å‹ä¸€èµ·é‡æ¸©çº¯çœŸæ—¶å…‰', icon: 'ğŸ¾' },
        { name: 'åŠ¨ç‰©æ£®å‹ä¼š', reason: 'æ— äººå²›ç”Ÿæ´»æ¨¡æ‹Ÿï¼ŒDIYè£…æ‰®å®¶å›­ï¼Œè¶…æ²»æ„ˆçš„æ…¢èŠ‚å¥ä½“éªŒ', icon: 'ğŸï¸' }
      ],
      'æ¢ç´¢å†’é™©': [
        { name: 'åŸç¥', reason: 'å¼€æ”¾ä¸–ç•ŒRPGï¼Œä¸ƒå›½å†’é™©ç­‰ä½ æ¢ç´¢ï¼Œç”»é¢éŸ³ä¹éƒ½æ˜¯è‰ºæœ¯å“çº§åˆ«', icon: 'ğŸŒŸ' },
        { name: 'å¡å°”è¾¾ä¼ è¯´', reason: 'å¼€æ”¾ä¸–ç•Œæ¢ç´¢æ ‡æ†ï¼Œæ¯ä¸ªè§’è½éƒ½æœ‰æƒŠå–œç­‰ç€ä½ å‘ç°', icon: 'ğŸ—¡ï¸' }
      ]
    };

    // DOM å…ƒç´ 
    const conversation = document.getElementById('conversation');
    const gameInput = document.getElementById('gameInput');
    const analyzeBtn = document.getElementById('analyzeBtn');

    // å·¥å…·å‡½æ•°
    function addMessage(content, type = 'ai') {
      const msg = document.createElement('div');
      msg.className = `message ${type} slide-in`;
      msg.innerHTML = content;
      conversation.appendChild(msg);
      msg.scrollIntoView({ behavior: 'smooth', block: 'end' });
      return msg;
    }

    function showToast(text) {
      const toast = document.createElement('div');
      toast.className = 'toast';
      toast.textContent = text;
      document.body.appendChild(toast);
      setTimeout(() => toast.remove(), 2000);
    }

    // æ¸²æŸ“ç”¨æˆ·ç”»åƒå¡ç‰‡
    function renderTasteProfile(game, profile) {
      return `
        <div class="taste-card">
          <h3>
            ğŸ§¬ ä½ çš„æ¸¸æˆDNAè§£è¯»
          </h3>
          <div class="desc">${profile.analysis}</div>
          ${renderRadarChart(profile.dna)}
        </div>
      `;
    }

    // æ¸²æŸ“é›·è¾¾å›¾
    function renderRadarChart(dna) {
      const chartId = `radar_${Date.now()}`;
      return `
        <div class="radar-section">
          <div class="radar-wrap">
            <svg id="${chartId}" class="radar-canvas" viewBox="0 0 300 280">
              <defs>
                <radialGradient id="radarGrad" cx="50%" cy="50%" r="50%">
                  <stop offset="0%" style="stop-color:rgba(0,212,255,0.3)"/>
                  <stop offset="100%" style="stop-color:rgba(139,92,246,0.1)"/>
                </radialGradient>
              </defs>
            </svg>
            <div class="taste-legend">
              ${Object.entries(dna).map(([key, value], index) => `
                <div class="legend-item">
                  <div class="legend-dot" style="background: hsl(${index * 60}, 70%, 60%)"></div>
                  <span>${key}</span>
                  <span class="legend-level">${value}%</span>
                </div>
              `).join('')}
            </div>
          </div>
        </div>
      `;
    }

    // ç»˜åˆ¶é›·è¾¾å›¾
    function drawRadarChart(chartId, dna) {
      const svg = document.getElementById(chartId);
      if (!svg) return;

      const center = { x: 150, y: 140 };
      const maxRadius = 100;
      const categories = Object.keys(dna);
      const values = Object.values(dna);
      const angleStep = (2 * Math.PI) / categories.length;

      // æ¸…é™¤ç°æœ‰å†…å®¹
      svg.innerHTML = svg.innerHTML; // ä¿ç•™defs

      // ç»˜åˆ¶èƒŒæ™¯ç½‘æ ¼
      for (let i = 1; i <= 5; i++) {
        const radius = (maxRadius / 5) * i;
        const points = categories.map((_, index) => {
          const angle = angleStep * index - Math.PI / 2;
          const x = center.x + Math.cos(angle) * radius;
          const y = center.y + Math.sin(angle) * radius;
          return `${x},${y}`;
        }).join(' ');
        
        const polygon = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
        polygon.setAttribute('points', points);
        polygon.setAttribute('class', 'radar-bg');
        polygon.style.fill = i === 5 ? 'rgba(255,255,255,0.02)' : 'none';
        polygon.style.stroke = 'rgba(255,255,255,0.06)';
        svg.appendChild(polygon);
      }

      // ç»˜åˆ¶è½´çº¿
      categories.forEach((_, index) => {
        const angle = angleStep * index - Math.PI / 2;
        const x = center.x + Math.cos(angle) * maxRadius;
        const y = center.y + Math.sin(angle) * maxRadius;
        
        const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
        line.setAttribute('x1', center.x);
        line.setAttribute('y1', center.y);
        line.setAttribute('x2', x);
        line.setAttribute('y2', y);
        line.setAttribute('class', 'radar-grid');
        svg.appendChild(line);
      });

      // ç»˜åˆ¶æ•°æ®åŒºåŸŸ
      const dataPoints = values.map((value, index) => {
        const angle = angleStep * index - Math.PI / 2;
        const radius = (value / 100) * maxRadius;
        const x = center.x + Math.cos(angle) * radius;
        const y = center.y + Math.sin(angle) * radius;
        return `${x},${y}`;
      }).join(' ');

      const dataPolygon = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');
      dataPolygon.setAttribute('points', dataPoints);
      dataPolygon.setAttribute('class', 'radar-area');
      svg.appendChild(dataPolygon);

      // ç»˜åˆ¶æ•°æ®ç‚¹
      values.forEach((value, index) => {
        const angle = angleStep * index - Math.PI / 2;
        const radius = (value / 100) * maxRadius;
        const x = center.x + Math.cos(angle) * radius;
        const y = center.y + Math.sin(angle) * radius;
        
        const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
        circle.setAttribute('cx', x);
        circle.setAttribute('cy', y);
        circle.setAttribute('r', 4);
        circle.setAttribute('class', 'radar-point');
        svg.appendChild(circle);
      });

      // æ·»åŠ æ ‡ç­¾
      categories.forEach((category, index) => {
        const angle = angleStep * index - Math.PI / 2;
        const labelRadius = maxRadius + 20;
        const x = center.x + Math.cos(angle) * labelRadius;
        const y = center.y + Math.sin(angle) * labelRadius;
        
        const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');
        text.setAttribute('x', x);
        text.setAttribute('y', y + 4);
        text.setAttribute('class', 'radar-label');
        text.textContent = category;
        svg.appendChild(text);
      });
    }

    // ç”Ÿæˆæ¸¸æˆæ¨è
    function generateRecommendation(dna) {
      // æ‰¾åˆ°æœ€é«˜åˆ†çš„å‡ ä¸ªç»´åº¦
      const sortedTraits = Object.entries(dna)
        .sort(([,a], [,b]) => b - a)
        .slice(0, 2);
      
      const primaryTrait = sortedTraits[0][0];
      const recs = gameRecommendations[primaryTrait] || gameRecommendations['ä¼‘é—²å¨±ä¹'];
      const selectedGame = recs[Math.floor(Math.random() * recs.length)];
      
      return selectedGame;
    }

    // æ¸²æŸ“æ¨èå¡ç‰‡
    function renderRecommendation(game) {
      return `
        <div class="game-rec">
          <h3>ğŸ¯ ä¸ºä½ ç²¾é€‰æ¨è</h3>
          <div class="game-showcase">
            <div class="game-cover">
              <div style="font-size: 24px;">${game.icon}</div>
            </div>
            <div class="game-info">
              <div class="game-title">${game.name}</div>
              <div class="game-reason">${game.reason}</div>
              <div class="game-actions">
                <button class="btn-primary" onclick="openGame('${game.name}')">ç«‹å³ä½“éªŒ</button>
                <button class="btn-ghost" onclick="saveGame('${game.name}')">åŠ å…¥å¿ƒæ„¿å•</button>
              </div>
            </div>
          </div>
        </div>
      `;
    }

    // æ¸²æŸ“åé¦ˆå¡ç‰‡
    function renderFeedback() {
      return `
        <div class="feedback-card">
          <h3>ğŸ’ è¿™ä¸ªæ¨èæ€ä¹ˆæ ·ï¼Ÿ</h3>
          <div class="feedback-actions">
            <button class="btn-primary" onclick="handleFeedback(true)">ğŸ‰ å¾ˆåˆæˆ‘å£å‘³</button>
            <button class="btn-ghost" onclick="handleFeedback(false)">ğŸ¤” ä¸å¤ªå¯¹è·¯</button>
          </div>
          <div class="feedback-note">
            ä½ çš„åé¦ˆå¸®åŠ©æˆ‘ä»¬æ›´æ‡‚ä½ çš„æ¸¸æˆå“å‘³ âœ¨
          </div>
        </div>
      `;
    }

    // æ¸²æŸ“ç²¾ç»†åŒ–è°ƒæ•´è¡¨å•
    function renderRefineForm() {
      return `
        <div class="refine-form">
          <h3>ğŸ›ï¸ å‘Šè¯‰æˆ‘ä½ æ›´å…·ä½“çš„å–œå¥½</h3>
          <div class="filter-group">
            <div class="filter-label">æ¸¸æˆèŠ‚å¥</div>
            <div class="filter-options">
              <div class="filter-chip" data-filter="pace" data-value="å¿«èŠ‚å¥">å¿«èŠ‚å¥</div>
              <div class="filter-chip" data-filter="pace" data-value="ä¸­ç­‰èŠ‚å¥">ä¸­ç­‰èŠ‚å¥</div>
              <div class="filter-chip" data-filter="pace" data-value="æ…¢èŠ‚å¥">æ…¢èŠ‚å¥</div>
            </div>
          </div>
          <div class="filter-group">
            <div class="filter-label">æ¸¸æˆæ—¶é•¿</div>
            <div class="filter-options">
              <div class="filter-chip" data-filter="duration" data-value="5åˆ†é’Ÿä»¥å†…">5åˆ†é’Ÿä»¥å†…</div>
              <div class="filter-chip" data-filter="duration" data-value="10-30åˆ†é’Ÿ">10-30åˆ†é’Ÿ</div>
              <div class="filter-chip" data-filter="duration" data-value="1å°æ—¶ä»¥ä¸Š">1å°æ—¶ä»¥ä¸Š</div>
            </div>
          </div>
          <div class="filter-group">
            <div class="filter-label">ä»˜è´¹æ¨¡å¼</div>
            <div class="filter-options">
              <div class="filter-chip" data-filter="payment" data-value="å®Œå…¨å…è´¹">å®Œå…¨å…è´¹</div>
              <div class="filter-chip" data-filter="payment" data-value="è½»åº¦ä»˜è´¹">è½»åº¦ä»˜è´¹</div>
              <div class="filter-chip" data-filter="payment" data-value="ä¹°æ–­åˆ¶">ä¹°æ–­åˆ¶</div>
            </div>
          </div>
          <div class="filter-group">
            <div class="filter-label">ç¾æœ¯é£æ ¼</div>
            <div class="filter-options">
              <div class="filter-chip" data-filter="art" data-value="å†™å®é£æ ¼">å†™å®é£æ ¼</div>
              <div class="filter-chip" data-filter="art" data-value="å¡é€šå¯çˆ±">å¡é€šå¯çˆ±</div>
              <div class="filter-chip" data-filter="art" data-value="åƒç´ å¤å¤">åƒç´ å¤å¤</div>
              <div class="filter-chip" data-filter="art" data-value="äºŒæ¬¡å…ƒ">äºŒæ¬¡å…ƒ</div>
            </div>
          </div>
          <div style="margin-top: 20px;">
            <button class="btn-primary" onclick="generateCustomRecommendation()" style="width: 100%;">
              ğŸ¯ åŸºäºæˆ‘çš„å–œå¥½é‡æ–°æ¨è
            </button>
          </div>
        </div>
      `;
    }

    // ä¸»è¦åˆ†æå‡½æ•°
    function analyzeGame() {
      const gameName = gameInput.value.trim();
      if (!gameName) {
        showToast('è¯·å‘Šè¯‰æˆ‘ä½ åœ¨ç©ä»€ä¹ˆæ¸¸æˆ ğŸ˜Š');
        return;
      }

      // æ·»åŠ ç”¨æˆ·æ¶ˆæ¯
      addMessage(`æˆ‘æœ€è¿‘åœ¨ç©ï¼š<strong>${gameName}</strong>`, 'user');

      // æ˜¾ç¤ºåˆ†æä¸­çŠ¶æ€
      const thinkingMsg = addMessage(`
        <div class="thinking">
          <span>æ­£åœ¨åˆ†æä½ çš„æ¸¸æˆå“å‘³</span>
          <div class="thinking-dot"></div>
          <div class="thinking-dot"></div>
          <div class="thinking-dot"></div>
        </div>
      `);

      // æ¨¡æ‹Ÿåˆ†æè¿‡ç¨‹
      setTimeout(() => {
        thinkingMsg.remove();
        
        // è·å–æ¸¸æˆæ¡£æ¡ˆæˆ–ä½¿ç”¨é»˜è®¤
        const profile = gameProfiles[gameName] || gameProfiles['ç¬¬äº”äººæ ¼'];
        
        // æ·»åŠ åˆ†æç»“æœ
        const profileMsg = addMessage(renderTasteProfile(gameName, profile));
        
        // å»¶è¿Ÿç»˜åˆ¶é›·è¾¾å›¾ç¡®ä¿DOMå·²æ¸²æŸ“
        setTimeout(() => {
          const chartId = profileMsg.querySelector('svg').id;
          drawRadarChart(chartId, profile.dna);
        }, 100);

        // ç”Ÿæˆæ¨è
        setTimeout(() => {
          const recommendation = generateRecommendation(profile.dna);
          addMessage(renderRecommendation(recommendation));
          
          // æ·»åŠ åé¦ˆè¯·æ±‚
          setTimeout(() => {
            addMessage(renderFeedback());
          }, 800);
        }, 1200);
        
      }, 2000);

      // æ¸…ç©ºè¾“å…¥æ¡†
      gameInput.value = '';
    }

    // åé¦ˆå¤„ç†
    function handleFeedback(positive) {
      if (positive) {
        addMessage(`
          <div class="taste-card">
            <h3>ğŸ‰ å¤ªå¥½äº†ï¼</h3>
            <div class="desc" style="color: var(--brand3);">
              æˆ‘å·²ç»è®°ä½äº†ä½ çš„å–œå¥½ï¼Œä¸‹æ¬¡æ¨èä¼šæ›´ç²¾å‡†ã€‚<br>
              <strong>ç»§ç»­å‘Šè¯‰æˆ‘å…¶ä»–æ¸¸æˆï¼Œè®©æˆ‘æ›´æ‡‚ä½ çš„å“å‘³å§ï¼</strong>
            </div>
          </div>
        `);
      } else {
        addMessage(renderRefineForm());
      }
    }

    // ç²¾ç»†åŒ–æ¨è
    function generateCustomRecommendation() {
      const selectedFilters = {};
      document.querySelectorAll('.filter-chip.selected').forEach(chip => {
        const filter = chip.dataset.filter;
        const value = chip.dataset.value;
        if (!selectedFilters[filter]) selectedFilters[filter] = [];
        selectedFilters[filter].push(value);
      });

      // åŸºäºç­›é€‰æ¡ä»¶ç”Ÿæˆæ¨è
      let customGame = {
        name: 'é‡èº«å®šåˆ¶æ¨è',
        reason: 'åŸºäºä½ çš„å…·ä½“å–œå¥½ç²¾å¿ƒæŒ‘é€‰',
        icon: 'âœ¨'
      };

      // æ ¹æ®ç­›é€‰æ¡ä»¶è°ƒæ•´æ¨è
      if (selectedFilters.pace?.includes('å¿«èŠ‚å¥') && selectedFilters.duration?.includes('5åˆ†é’Ÿä»¥å†…')) {
        customGame = {
          name: 'è’é‡ä¹±æ–—',
          reason: '3åˆ†é’Ÿå¿«èŠ‚å¥å¯¹æˆ˜ï¼Œæ“ä½œç®€å•ä½†ç­–ç•¥ä¸°å¯Œï¼Œå®Œç¾åŒ¹é…ä½ çš„éœ€æ±‚',
          icon: 'âš¡'
        };
      } else if (selectedFilters.art?.includes('å¡é€šå¯çˆ±') && selectedFilters.payment?.includes('å®Œå…¨å…è´¹')) {
        customGame = {
          name: 'ç³–è±†äººç»ˆææ·˜æ±°èµ›',
          reason: 'èŒè¶£å¯çˆ±çš„ç«æŠ€é—¯å…³ï¼Œå…è´¹æ¸¸ç©ï¼Œå’Œæœ‹å‹ä¸€èµ·å¿«ä¹æ‘”è·¤',
          icon: 'ğŸ­'
        };
      } else if (selectedFilters.duration?.includes('1å°æ—¶ä»¥ä¸Š') && selectedFilters.art?.includes('äºŒæ¬¡å…ƒ')) {
        customGame = {
          name: 'åŸç¥',
          reason: 'ç²¾ç¾äºŒæ¬¡å…ƒå¼€æ”¾ä¸–ç•Œï¼Œå‰§æƒ…ä¸°å¯Œå¯æ·±åº¦æ¸¸ç©ï¼Œè§†è§‰å¬è§‰åŒé‡äº«å—',
          icon: 'ğŸŒŸ'
        };
      }

      addMessage(`
        <div class="taste-card">
          <h3>ğŸ”§ æ ¹æ®ä½ çš„å–œå¥½è°ƒæ•´å®Œæ¯•</h3>
          <div class="desc">ç­›é€‰æ¡ä»¶ï¼š${JSON.stringify(selectedFilters)}</div>
        </div>
      `);
      
      addMessage(renderRecommendation(customGame));
    }

    // å·¥å…·å‡½æ•°
    function openGame(gameName) {
      showToast(`æ­£åœ¨ä¸ºä½ è·³è½¬åˆ° ${gameName} ğŸš€`);
      // è¿™é‡Œå¯ä»¥æ·»åŠ å®é™…çš„è·³è½¬é€»è¾‘
    }

    function saveGame(gameName) {
      showToast(`${gameName} å·²åŠ å…¥ä½ çš„å¿ƒæ„¿å• ğŸ’`);
      // è¿™é‡Œå¯ä»¥æ·»åŠ ä¿å­˜é€»è¾‘
    }

    // ç­›é€‰æ ‡ç­¾ç‚¹å‡»å¤„ç†
    document.addEventListener('click', (e) => {
      if (e.target.classList.contains('filter-chip')) {
        e.target.classList.toggle('selected');
      }
    });

    // äº‹ä»¶ç›‘å¬å™¨
    analyzeBtn.addEventListener('click', analyzeGame);
    gameInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') analyzeGame();
    });

    // å¿«æ·æ ‡ç­¾ç‚¹å‡»
    document.querySelectorAll('.tag').forEach(tag => {
      tag.addEventListener('click', () => {
        gameInput.value = tag.dataset.game;
        analyzeGame();
      });
    });

    // æš´éœ²å…¨å±€å‡½æ•°ä¾›onclickè°ƒç”¨
    window.handleFeedback = handleFeedback;
    window.generateCustomRecommendation = generateCustomRecommendation;
    window.openGame = openGame;
    window.saveGame = saveGame;

    // è‡ªæ£€æµ‹è¯•
    setTimeout(() => {
      const tests = [
        { name: 'æ¸¸æˆæ¡£æ¡ˆæ•°æ®åŠ è½½', pass: Object.keys(gameProfiles).length > 0 },
        { name: 'æ¨èç³»ç»Ÿåˆå§‹åŒ–', pass: Object.keys(gameRecommendations).length > 0 },
        { name: 'DOMå…ƒç´ æŒ‚è½½', pass: !!document.getElementById('conversation') },
        { name: 'å…¨å±€å‡½æ•°æš´éœ²', pass: typeof window.handleFeedback === 'function' }
      ];
      
      const allPassed = tests.every(t => t.pass);
      const toast = document.createElement('div');
      toast.className = 'toast';
      toast.style.background = allPassed ? 'rgba(16,185,129,0.2)' : 'rgba(239,68,68,0.2)';
      toast.style.borderColor = allPassed ? 'rgba(16,185,129,0.4)' : 'rgba(239,68,68,0.4)';
      toast.innerHTML = `${allPassed ? 'âœ…' : 'âŒ'} ç³»ç»Ÿè‡ªæ£€ Â· ${tests.map(t => `${t.pass ? 'âœ“' : 'âœ—'} ${t.name}`).join(' | ')}`;
      document.body.appendChild(toast);
      setTimeout(() => toast.remove(), 3000);
    }, 500);
  </script>
</body>
</html>